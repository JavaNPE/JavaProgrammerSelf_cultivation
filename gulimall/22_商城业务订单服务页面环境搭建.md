# 22_商城业务-订单服务页面环境搭建

## P262商城业务-订单服务页面环境搭建

### 1、提取动静分离的资源

首先将课程提供的前端页面放在nginx中，自己新建目录结构，将index文件放入到idea工程下的gulimall-order服务中的templates文件夹中，并将等待付款index.html页面改成detail.html。nginx中只copy静态资源。index.html页面放在idea中的templates中。

1. templates等待付款->detail
2. 订单页->list
3. 结算页->confirm
4. 收银页->pay

![image-20220605193611990](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202206051936116.png)



![image-20220605195611051](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202206051956143.png)



![image-20220605195426232](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202206051954317.png)



![image-20220605200053892](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202206052000960.png)

### 2、配置域名服务

与订单有关的信息会跳转到新的域名服务上面去的

> gulimall项目截至目前的域名方案如下

```java
# gulimall
192.168.56.10 gulimall.com
192.168.56.10 search.gulimall.com
192.168.56.10 item.gulimall.com
192.168.56.10 auth.gulimall.com
192.168.56.10 cart.gulimall.com
192.168.56.10 order.gulimall.com

    
```

![image-20220731093631490](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207310936591.png)



网关配置路由功能

```yaml
        # 只要以cart.gulimall.com开头，我们就将其负载均衡到gulimall-cart服务
        - id: gulimall_cart_route
          uri: lb://gulimall-cart
          predicates:
            - Host=cart.gulimall.com
        # 只要以order.gulimall.com开头，我们就将其负载均衡到gulimall-order服务
        - id: gulimall_order_route
          uri: lb://gulimall-order
          predicates:
            - Host=order.gulimall.com
```



修改confirm.html静态资源路径，因为我们毕竟是动静分离的嘛，所以有些静态文件的地址需要修改正确。

![image-20220731095653228](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207310956260.png)

![image-20220731095401737](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207310954851.png)



![image-20220731095628362](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207310956459.png)



修改detail详情页的相关地址信息

![image-20220731100207347](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207311002386.png)

替换所有的src="和href="标签地址

![image-20220731100632445](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207311006544.png)

![image-20220731100404863](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207311004940.png)

列表list.html同理

![image-20220731100938703](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207311009741.png)

![image-20220731101231209](https://hediancha-1312143060.cos.ap-shanghai.myqcloud.com/202207311012297.png)
